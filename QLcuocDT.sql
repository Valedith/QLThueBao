CREATE DATABASE QLYCUOCDT
GO 
USE QLYCUOCDT
GO
CREATE TABLE CUSTOMER(
	ID_CUSTOMER NVARCHAR(10),
	NAME NVARCHAR(50),
	IDENTIFY INT,
	JOB NVARCHAR(50),
	POSITION NVARCHAR(50),
	ADDRESS NVARCHAR(200)
	PRIMARY KEY(ID_CUSTOMER)
)
GO
DROP TABLE SIM
CREATE TABLE SIM(
	ID_SIM INT,
	PHONENUMBER INT,
	STATUS INT
	PRIMARY KEY (ID_SIM),
	UNIQUE(PHONENUMBER)
)
GO

CREATE TABLE CONTRACT(
	ID_CONTRACT NVARCHAR(10),
	ID_CUSTOMER NVARCHAR(10),
	ID_SIM INT,
	DATEREGISTER DATETIME,
	FARE INT
	PRIMARY KEY(ID_CONTRACT),
	CONSTRAINT FK_CONTRACT_CUSTOMER FOREIGN KEY (ID_CUSTOMER) REFERENCES CUSTOMER(ID_CUSTOMER),
	CONSTRAINT FK_CONTRACT_SIM FOREIGN KEY (ID_SIM) REFERENCES SIM(ID_SIM)
)
GO

CREATE TABLE BILL(
	ID_BILL NVARCHAR(10),
	ID_CUSTOMER NVARCHAR(10),
	USE_MINUTE INT,
	DATE_EXPORT DATETIME,
	DATE_CUT DATETIME,
	POSTAGE INT,
	FARE INT
	PRIMARY KEY (ID_BILL),
	CONSTRAINT FK_BILL_CUSTOMER FOREIGN KEY (ID_CUSTOMER) REFERENCES CUSTOMER(ID_CUSTOMER)
)

GO
DROP TABLE FARE
CREATE TABLE FARE(
	ID INT IDENTITY(1,1),
	ID_SIM INT,
	TIME_STARTB7 TIME,
	TIME_STARTA7 TIME,
	TIME_STOPB23 TIME,
	TIME_STOPA23 TIME,
	PRIMARY KEY(ID),
	CONSTRAINT FK_FARE_SIM FOREIGN KEY (ID_SIM) REFERENCES SIM(ID_SIM)
)

INSERT INTO CUSTOMER VALUES ('KH01',N'Nguyễn Ái Hồng','025664871',N'Sinh Viên',N'Sinh Viên',N'Tầng 6, 123B Trần Đăng Ninh, P. Dịch Vọng, Q. Cầu Giấy, Hà Nội');
INSERT INTO CUSTOMER VALUES ('KH02',N'Trần Văn Giàu','024357428',N'Kế Toán',N'Trưởng Kế Toán',N'189A Cống Quỳnh, phường Nguyễn Cư Trinh, Quận 1, TP. Hồ Chí Minh');
INSERT INTO CUSTOMER VALUES ('KH03',N'Dương Lữ Tâm','02687488',N'Công Nghệ Thông Tin',N'Kỹ Thuật Phần Mềm',N'375- 377 Nguyễn Đình Chiểu, phường 5, Quận 3, TP. Hồ Chí Minh');
INSERT INTO CUSTOMER VALUES ('KH04',N'Liễu Thị Dư Mai','024258741',N'Quản Trị Kinh Doanh',N'Phó Phòng',N'58 Nguyễn Trãi, Phường 3, Quận 5, TP. Hồ Chí Minh');
INSERT INTO CUSTOMER VALUES ('KH05',N'Nguyễn Thị Thuỷ Tiên','025102485',N'Nội Trợ',N'Nội Trợ',N'478 Cách Mạng Tháng Tám, phường 11, Quận 3, TP. Hồ Chí Minh');
INSERT INTO CUSTOMER VALUES ('KH06',N'Lê Nguyễn Kim Thịnh','023542874',N'Bảo Vệ',N'Bảo Vệ',N'126 Hùng Vương, Quận 5, Quận 5, TP. Hồ Chí Minh');
INSERT INTO CUSTOMER VALUES ('KH07',N'Trần Long','024759863',N'Kiến Trúc Sư',N'Kiến Trúc Sư',N'286 Võ Văn Ngân, phường Bình Thọ, Quận Thủ Đức, TP. Hồ Chí Minh');
INSERT INTO CUSTOMER VALUES ('KH08',N'Hoàng Minh Tú','024351242',N'Thiết Kế',N'Thiết Kế',N'530 Lê Văn Sỹ, Phường 14, Quận 3, TP. Hồ Chí Minh');

INSERT INTO SIM VALUES(0001,092356874,1);
INSERT INTO SIM VALUES(0002,092369685,1);
INSERT INTO SIM VALUES(0003,092435752,1);
INSERT INTO SIM VALUES(0004,092369633,1);
INSERT INTO SIM VALUES(0005,092134752,1);
INSERT INTO SIM VALUES(0006,092475845,1);
INSERT INTO SIM VALUES(0007,092024205,1);
INSERT INTO SIM VALUES(0008,092369746,1);
INSERT INTO SIM VALUES(0009,092130425,0);
INSERT INTO SIM VALUES(0010,092346674,0);
INSERT INTO SIM VALUES(0011,092431852,0);
INSERT INTO SIM VALUES(0012,092030341,0);
INSERT INTO SIM VALUES(0013,093201010,0);
INSERT INTO SIM VALUES(0014,092235422,0);
INSERT INTO SIM VALUES(0015,092223585,0);
INSERT INTO SIM VALUES(0016,092369638,0);
INSERT INTO SIM VALUES(0017,092132323,0);
INSERT INTO SIM VALUES(0018,092310012,0);
INSERT INTO SIM VALUES(0019,092000528,0);
INSERT INTO SIM VALUES(0020,092475124,0);

INSERT INTO CONTRACT VALUES ('C01','KH01',1,'10/20/2017',50000);
INSERT INTO CONTRACT VALUES ('C02','KH02',1,'9/21/2017',50000);
INSERT INTO CONTRACT VALUES ('C03','KH03',1,'3/12/2017',50000);
INSERT INTO CONTRACT VALUES ('C04','KH04',1,'6/28/2017',50000);
INSERT INTO CONTRACT VALUES ('C05','KH05',1,'2/2/2017',50000);
INSERT INTO CONTRACT VALUES ('C06','KH06',1,'3/7/2017',50000);
INSERT INTO CONTRACT VALUES ('C07','KH07',1,'6/9/2017',50000);
INSERT INTO CONTRACT VALUES ('C08','KH08',1,'6/6/2017',50000);

INSERT INTO BILL VALUES('B01','KH01',32,'6/15/2018','7/18/2018',50000,114000);
INSERT INTO BILL VALUES('B02','KH01',20,'2/2/2018','3/5/2018',50000,90000);
INSERT INTO BILL VALUES('B03','KH01',15,'1/15/2018','2/18/2018',50000,80000);
INSERT INTO BILL VALUES('B04','KH02',20,'5/8/2018','6/11/2018',50000,90000);
INSERT INTO BILL VALUES('B05','KH02',13,'6/3/2018','7/6/2018',50000,76000);
INSERT INTO BILL VALUES('B06','KH02',5,'10/20/2018','11/23/2018',50000,700000);
INSERT INTO BILL VALUES('B07','KH02',31,'2/1/2018','3/4/2018',50000,112000);
INSERT INTO BILL VALUES('B08','KH02',15,'3/27/2018','4/30/2018',50000,80000);
INSERT INTO BILL VALUES('B09','KH03',16,'9/14/2018','10/17/2018',50000,82000);
INSERT INTO BILL VALUES('B10','KH04',21,'6/18/2018','7/21/2018',50000,92000);
INSERT INTO BILL VALUES('B11','KH04',16,'1/1/2018','2/4/2018',50000,82000);
INSERT INTO BILL VALUES('B12','KH04',12,'4/8/2018','5/11/2018',50000,64000);
INSERT INTO BILL VALUES('B13','KH05',6,'5/19/2018','6/22/2018',50000,62000);
INSERT INTO BILL VALUES('B14','KH05',7,'6/13/2018','7/16/2018',50000,64000);
INSERT INTO BILL VALUES('B15','KH06',9,'4/16/2018','5/19/2018',50000,114000);


INSERT INTO FARE VALUES(1,null,'14:13','14:15',null);
INSERT INTO FARE VALUES(1,null,'7:13','8:15',null);
INSERT INTO FARE VALUES(2,null,'8:20','9:30',null);
INSERT INTO FARE VALUES(2,'2:30',null,'14:15',null);
INSERT INTO FARE VALUES(3,null,'16:20','18:10',null);
INSERT INTO FARE VALUES(3,null,'20:15',null,'23:57');
INSERT INTO FARE VALUES(3,null,'9:37','10:49',null);
INSERT INTO FARE VALUES(4,null,'16:24','16:28',null);
INSERT INTO FARE VALUES(4,null,'17:00','17:37',null);